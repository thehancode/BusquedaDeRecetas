(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5350:(e,s,t)=>{Promise.resolve().then(t.bind(t,3236))},3236:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p});var a=t(5155),r=t(2115),l=t(6658);function n(e){let{value:s,onChange:t}=e;return(0,a.jsxs)("div",{className:"m-3 flex-1 flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-gray-600 font-bold",children:["Calor\xedas m\xe1ximas: ",s]}),(0,a.jsx)("input",{type:"range",min:"500",max:"1800",step:"100",value:s,onChange:e=>{t(Number(e.target.value))},className:"range range-primary w-64 h-6 bg-gray-200 appearance-none cursor-pointer"})]})}function c(e){let{count:s,onSelect:t}=e,r=Array.from({length:10},(e,s)=>s+1);return(0,a.jsxs)("div",{className:"m-3 flex-1 flex items-center justify-end",children:[(0,a.jsx)("span",{className:"m-2 text-gray-600 font-bold",children:"M\xe1ximo de recetas:"}),(0,a.jsx)("select",{className:"select w-1/3",value:s,onChange:e=>{t(Number(e.target.value))},children:r.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]})}function i(e){let{value:s,onChange:t,onSearch:r}=e;return(0,a.jsx)("div",{className:"flex-1 flex justify-center items-center",children:(0,a.jsxs)("label",{className:"input input-bordered input-xl flex items-center gap-2 grow",children:[(0,a.jsx)("input",{type:"text",className:"grow",placeholder:"Buscar",value:s,onChange:e=>{t(e.target.value)}}),(0,a.jsx)("svg",{onClick:r,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"h-4 w-4 opacity-70",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M9.965 11.026a5 5 0 1 1 1.06-1.06l2.755 2.754a.75.75 0 1 1-1.06 1.06l-2.755-2.754ZM10.5 7a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Z",clipRule:"evenodd"})})]})})}function o(e){let{showError:s}=e,[t,l]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{if(s){l(!0);let e=setTimeout(()=>{l(!1)},2e3);return()=>clearTimeout(e)}},[s]),t)?(0,a.jsx)("div",{className:"alert alert-error shadow-lg absolute top-4 right-4 w-auto",children:(0,a.jsx)("span",{children:"Algo sali\xf3 mal"})}):null}function x(e){let{onDataFetched:s}=e,t=(0,l.useSearchParams)().get("apiKey"),x=t?t.replace(/\//g,""):null,[u,d]=(0,r.useState)(500),[m,p]=(0,r.useState)(""),[h,f]=(0,r.useState)(1),[g,j]=(0,r.useState)(!1),N=async()=>{try{let e=await function(e){let{searchTerm:s,calorieValue:t,numberRecipes:a,apiKey:r}=e;return new Promise((e,l)=>{let n="https://api.spoonacular.com/recipes/complexSearch?query=".concat(encodeURIComponent(s),"&maxCalories=").concat(t,"&number=").concat(a,"&apiKey=").concat(r),c=new XMLHttpRequest;c.open("GET",n,!0),c.onreadystatechange=()=>{if(c.readyState===XMLHttpRequest.DONE){if(200===c.status)try{let s=JSON.parse(c.responseText).results.map(e=>({id:e.id,title:e.title,image:e.image}));e(s)}catch(e){l(Error("Failed to parse response: "+e))}else l(Error("Error: "+c.statusText))}},c.onerror=()=>{l(Error("Network Error"))},c.send()})}({searchTerm:m,calorieValue:u,numberRecipes:h,apiKey:x});s(e)}catch(e){j(!0)}};return(0,a.jsxs)("div",{className:"flex flex-col w-full p-4",children:[(0,a.jsxs)("div",{className:"flex-1 flex",children:[(0,a.jsx)(n,{value:u,onChange:d}),(0,a.jsx)(c,{count:h,onSelect:f})]}),(0,a.jsx)(i,{value:m,onChange:p,onSearch:N}),(0,a.jsx)(o,{showError:g})]})}function u(e){let{items:s}=e;return(0,a.jsxs)("div",{className:"flex-1 text-lg text-gray-700  bg-orange-200",children:[(0,a.jsxs)("div",{className:"flex items-center font-bold border border-white",children:[(0,a.jsx)("span",{className:"flex-1 p-2 ",children:"ID de Receta"}),(0,a.jsx)("span",{className:"flex-1 p-2 ",children:"Nombre de receta"}),(0,a.jsx)("span",{className:"flex-1 p-2 ",children:"Imagen"})]}),s.map(e=>(0,a.jsxs)("div",{className:"flex items-center border border-white",children:[(0,a.jsx)("span",{className:"flex-1 p-2 ",children:e.id}),(0,a.jsx)("span",{className:"flex-1 p-2 ",children:e.title}),(0,a.jsxs)("span",{className:"flex-1 p-2 ",children:[" ",(0,a.jsx)("img",{className:"rounded-lg",src:e.image,alt:e.title})]})]},e.id))]})}function d(){let[e,s]=(0,r.useState)([]);return(0,a.jsxs)("div",{className:"flex w-full flex-col row-start-2",children:[(0,a.jsx)("h1",{className:"text-4xl font-extrabold text-gray-900 leading-tight tracking-tight sm:text-5xl md:text-6xl",children:"B\xfasqueda de recetas"}),(0,a.jsx)(x,{onDataFetched:function(e){s(e)}}),(0,a.jsx)(u,{items:e})]})}function m(){let e=(0,l.useRouter)(),s=(0,l.useSearchParams)().get("apiKey");return(0,r.useEffect)(()=>{s&&s.endsWith("/status")&&e.replace("/status")},[s,e]),(0,a.jsx)("main",{children:(0,a.jsx)("div",{className:"grid grid-rows-[20px_1fr_20px] bg-orange-300 justify-items-center min-h-screen p-8 pb-20 gap-16 sm:p-20 font-[family-name:var(--font-geist-sans)]",children:(0,a.jsx)(d,{})})})}function p(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{children:"Cargando..."}),children:(0,a.jsx)(m,{})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[441,517,358],()=>s(5350)),_N_E=e.O()}]);